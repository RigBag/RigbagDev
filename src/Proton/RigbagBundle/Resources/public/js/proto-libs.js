var coreLoadingData=false;var coreRefreshInterval=null;function init(){rbApp.user.refreshAccount();startRefresh()}function startRefresh(){coreRefreshInterval=setInterval("rbApp.user.refreshAccount()",30000)}function stopRefresh(){clearInterval(coreRefreshInterval)}function setUrl(a){var b=false;if(a==rbApp.getHash()){b=true}window.location.hash=a;if(b){rbApp.getHash();rbApp.parseHash()}}function userPanelMessageClick(a){$("#user-panel .popover").fadeOut(function(){$(this).removeClass("in")})}function observerSearch(a){}function sendMail(b,c){var a={type:b,data:c};$.ajax({type:"POST",url:APP_PATH+"mail/send/",data:a,cache:false,dataType:"json",success:function(d){}})}function parseGMapPlace(e){var f={formated:null,countryCode:null,lat:null,lng:null};for(var d in e.address_components){for(var c in e.address_components[d].types){if(e.address_components[d].types[c]=="country"){f.countryCode=e.address_components[d].short_name}}}f.formated=e.formatted_address;f.lat=e.geometry.location.Ya;f.lng=e.geometry.location.Za;return f}function selectMenuElement(b){var a=$(b).parent().parent();$(a).children("li").removeClass("active");$(b).parent().addClass("active")}function selectMenuElement2(b){var a=$(b).parent();$(a).children("li").removeClass("active");$(b).addClass("active")}function initDropdown(d,b){var c=$(d).children(".cont").children("ul");var a=$(c).children("li");var e=$(d).children(".cont").children(".value");$(a).click(function(){$(a).removeClass("current");$(this).addClass("current");$(c).slideUp("fast");$(b).val($(this).attr("data-id"));$(e).html($(this).html())});$(d).hover(function(){$(c).slideDown("fast")},function(){$(c).slideUp("fast")})}function initDropdown2(sel,valSel,callback){var ul=$(sel).children(".cont").children("ul");var li=$(ul).children("li");var val=$(sel).children(".cont").children(".value");$(li).click(function(){$(li).removeClass("current");$(this).addClass("current");$(ul).slideUp("fast");$(valSel).val($(this).attr("data-id"));$(val).html($(this).html());if(callback!=undefined){eval(callback)}});$(sel).click(function(){if($(this).children(".cont").hasClass("opened")){$(ul).slideUp("fast");$(this).children(".cont").removeClass("opened")}else{$(ul).slideDown("fast");$(this).children(".cont").addClass("opened")}})}function showLoader(){$("#main-loader").show()}function hideLoader(){$("#main-loader").hide()};
function RigBagApp(){this.hash="";this.actionData={};this.action="";this.actionInProgess=false;this.actionStamp=null;this.advert=new RigBagAdvert();this.qa=new RigBagQa();this.user=new RigBagUser();this.circle=new RigBagCircle();this.mySport=new RigBagMySport();this.queryParams={}}RigBagApp.prototype.init=function(){this.getHash();this.parseHash()};RigBagApp.prototype.setActionData=function(a){this.actionData=a};RigBagApp.prototype.getActionData=function(){return this.actionData};RigBagApp.prototype.getHash=function(){this.hash=window.location.hash.substr(1);return this.hash};RigBagApp.prototype.setAction=function(a){this.action=a};RigBagApp.prototype.getAction=function(){return this.action};RigBagApp.prototype.setHash=function(a){window.location.hash="#"+a;this.hash=a};RigBagApp.prototype.mustLoginInit=function(){$(".must-login").attr("onclick","");$(".must-login").click(function(){$("#modalLogin").modal("show");return false})};RigBagApp.prototype.reload=function(){window.location.reload()};RigBagApp.prototype.callAction=function(action,callback){$(".question-new-form").slideUp();if($("#flash-message").length){$("#flash-message").fadeOut(function(){$(this).remove()})}this.actionStamp=new Date().getTime();data=this.getActionData();data.actionStamp=this.actionStamp;showLoader();$.ajax({type:"POST",url:APP_PATH+action,data:data,cache:false,dataType:"json",success:function(data){if(data.actionStamp==rbApp.actionStamp){hideLoader();rbApp.postAction(data)}if(callback!==undefined){eval(callback)}},error:function(data){hideLoader();rbApp.showFlash("",data.status+" "+data.statusText,"error",0)}})};RigBagApp.prototype.loadMoreQa=function(b){var a;this.actionStamp=new Date().getTime();data=this.getActionData();data.actionStamp=this.actionStamp;showLoader();if(b==="mode"){a="advert/more/"}else{a="q-and-a/more/"}$.ajax({type:"POST",url:APP_PATH+a,data:data,cache:false,dataType:"json",success:function(c){if(c.actionStamp==rbApp.actionStamp){hideLoader();if(c.full===0){$(".load-more").addClass("hide")}$("#qa-list ul").append(c.content)}},error:function(c){hideLoader();rbApp.showFlash("",c.status+" "+c.statusText,"error",3000)}})};RigBagApp.prototype.loadMoreAdverts=function(b){var a;this.actionStamp=new Date().getTime();data=this.getActionData();data.actionStamp=this.actionStamp;showLoader();switch(b){case"mode":a="advert/more/";break;case"circle":a="circles/more/adverts/";break}$.ajax({type:"POST",url:APP_PATH+a,data:data,cache:false,dataType:"json",success:function(c){if(c.actionStamp==rbApp.actionStamp){hideLoader();if(c.full===0){$(".load-more").addClass("hide")}$("#adverts-list").append(c.content)}},error:function(c){hideLoader();rbApp.showFlash("",c.status+" "+c.statusText,"error",3000)}})};RigBagApp.prototype.postAction=function(a){this.fillData(a);this.updateInterface()};RigBagApp.prototype.updateInterface=function(){};RigBagApp.prototype.fillData=function(c){$(document).unbind("scroll");for(var b in c.toUpdate){switch(c.toUpdate[b]){case"headerExtras":$("#headerExtras").html(c.header.extras);break;case"headerExtras-2":$("#headerExtras-2").html(c.header.extras2);break;case"headerTop":$("#headerTop").html(c.header.top);break;case"headerBottom":$("#headerBottom").html(c.header.bottom);break;case"content":$("#content").html(c.content);break;case"bodyClass":$("body").attr("class",c.bodyClass);break;case"subContent":$("#sub-content").html(c.subContent);break;case"flashMessage":if(c.flashMessage){this.showFlash(c.flashMessage.title,c.flashMessage.content,c.flashMessage.type,0)}break;case"circleContent":$("#circle-content").html(c.content);break;case"circleContentClass":$("#circle-content").attr("class",c.contentClass);break}}};RigBagApp.prototype.parseHash=function(){var a=this.hash.split("/");this.queryParams=null;$(".sidebar .menu li").removeClass("active");switch(a[1]){case"news":$(".sidebar .menu li.news").addClass("active");if(a[2]==="list"){this.callAction("news/list/")}break;case"signup":$(".sidebar .menu li.settings").addClass("active");switch(a[2]){case"profile":this.callAction("signup/profile/");break;case"mysports":this.callAction("signup/mysports/");break;case"subscription":this.callAction("signup/subscription/");break;case"done":this.callAction("signup/done/");break}break;case"g":$(".sidebar .menu li.adverts").addClass("active");break;case"adverts":$(".sidebar .menu li.adverts").addClass("active");switch(a[2]){case"buy":this.callAction("advert/buy/"+a[3]+"/");break;case"list":this.callAction("advert/list/"+a[3]+"/");break;case"view":this.callAction("advert/view/"+a[3]+"/h/");break;case"search":break;case"add":if(a[3]==="circle"){this.callAction("advert/add/?circles="+a[4])}else{this.callAction("advert/add/")}break;case"edit":this.callAction("advert/edit/"+a[3]+"/");break}break;case"circles":$(".sidebar .menu li.circles").addClass("active");if(a[2]==="list"){this.callAction("circles/0/")}else{if(a[2]=="browse"){this.callAction("circles/browse/")}else{switch(a[3]){case"adverts":if($("#circle-content").length){this.callAction("circles/adverts/"+a[2]+"/simple/")}else{this.callAction("circles/adverts/"+a[2]+"/full/")}break;case"qa":if($("#circle-content").length){this.callAction("circles/qa/"+a[2]+"/simple/")}else{this.callAction("circles/qa/"+a[2]+"/full/")}break;case"members":if($("#circle-content").length){this.callAction("circles/members/"+a[2]+"/simple/")}else{this.callAction("circles/members/"+a[2]+"/full/")}break}}}break;case"qa":$(".sidebar .menu li.qa").addClass("active");switch(a[2]){case"list":this.callAction("q-and-a/none/0/");break;case"add":this.callAction("q-and-a/op/1/");break;case"view":this.callAction("q-and-a/view/"+a[3]+"/");break}break;case"profile":if(a[2]==this.user.id){$(".sidebar .menu li.my-profile").addClass("active")}switch(a[3]){case"adverts":this.callAction("profile/"+a[2]+"/");break;case"circles":switch(a[4]){case"join":if($("body").hasClass("my-profile")){this.callAction("circles/join/simple/")}else{this.callAction("circles/join/full/")}break;case"list":if($("body").hasClass("my-profile")){this.callAction("profile/circles/"+a[2]+"/simple/")}else{this.callAction("profile/circles/"+a[2]+"/full/")}break}break;case"qa":if($("body").hasClass("my-profile")){this.callAction("profile/qa/"+a[2]+"/simple/")}else{this.callAction("profile/qa/"+a[2]+"/full/")}break;default:this.callAction("profile/");$(".sidebar .menu li.my-profile").addClass("active")}break;case"news":$(".sidebar .menu li.news").addClass("active");break;case"settings":$(".sidebar .menu li.settings").addClass("active");switch(a[2]){case"profile":if(a[3]=="reload"){this.callAction("settings/?r=1")}else{this.callAction("settings/")}break;case"mysports":this.callAction("settings/my-sports/");break;case"transactions":this.callAction("profile/transactions/");break;case"subscription":this.callAction("profile/subscription/");break}break;default:$(".sidebar .menu li.adverts").addClass("active");this.callAction("advert/list/sale/")}};RigBagApp.prototype.showFlash=function(a,e,d,b){$("#flash-message").remove();var c='<div id="flash-message" class="alert alert-block';if(d=="success"){c=c+" alert-success"}else{if(d=="error"){c=c+" alert-error"}else{if(d=="info"){c=c+" alert-info"}}}c=c+'">';c=c+'<button type="button" class="close" data-dismiss="alert">Ã—</button>';if(a.length){c=c+"<h4>"+a+"</h4>"}c=c+e;c=c+"</div>";$(".container .content .body").prepend(c);if(b){setTimeout("rbApp.hideFlash()",b)}};RigBagApp.prototype.hideFlash=function(){$("#flash-message").fadeOut(function(){$(this).remove()})};
RigBagAdvert=function(){this.searchParams={query:"",lastCall:false}};RigBagAdvert.prototype.sendToFriend=function(){if($("#formToFriend").valid()){showLoader();var a={advertId:$("#tf-advert-id").val(),message:$("#tf-message").val(),emails:$("#tf-emails").val()};$.ajax({type:"POST",url:APP_PATH+"advert/suggest-to-friend/",data:a,cache:false,dataType:"json",success:function(b){$("#tf-message").val("");$(".to-friend-form").slideUp();hideLoader()}})}};RigBagAdvert.prototype.freeAccept=function(b){showLoader();var a={freeId:b};$.ajax({type:"POST",url:APP_PATH+"free/accept/",data:a,cache:false,dataType:"json",success:function(d){hideLoader();$("#messages-list").html(d.content);sendMail("freeAccepted",a)}})};RigBagAdvert.prototype.swapAccept=function(b){showLoader();var a={swapId:b};$.ajax({type:"POST",url:APP_PATH+"swap/accept/",data:a,cache:false,dataType:"json",success:function(d){hideLoader();$("#messages-list").html(d.content);sendMail("swapAccepted",a)}})};RigBagAdvert.prototype.freeReject=function(b){showLoader();var a={freeId:b};$.ajax({type:"POST",url:APP_PATH+"free/reject/",data:a,cache:false,dataType:"json",success:function(d){hideLoader();$("#messages-list").html(d.content);sendMail("freeRejected",a)}})};RigBagAdvert.prototype.swapReject=function(b){showLoader();var a={swapId:b};$.ajax({type:"POST",url:APP_PATH+"swap/reject/",data:a,cache:false,dataType:"json",success:function(d){hideLoader();$("#messages-list").html(d.content);sendMail("swapRejected",a)}})};RigBagAdvert.prototype.renderForm=function(){switch($(".f-mode").val()){case"sale":$(".f-name").addClass("required");$(".f-price").addClass("required");$(".f-price").addClass("number");$(".f-swap-for").removeClass("required");$(".only-swap, .only-freebie").hide();$(".only-sale").show();break;case"swap":$(".f-name").removeClass("required");$(".f-price").removeClass("required");$(".f-price").removeClass("number");$(".f-swap-for").addClass("required");$(".only-sale, .only-freebie").hide();$(".only-swap").show();break;case"freebie":$(".f-name").removeClass("required");$(".f-swap-for").removeClass("required");$(".f-price").removeClass("required");$(".f-price").removeClass("number");$(".only-swap, .only-sale").hide();$(".only-freebie").show();break}this.renderPreview()};RigBagAdvert.prototype.renderPreview=function(){var a;var d=$(".f-name").val();var m=28;var j=$(".f-price").val();var k=$("#dropdown-currency .value").html();var h=$(".f-location-formated").val().split(", ");var n="";var p="";var i=" for ";var e=0;var f="";if(h.length){c=h.length-1;for(var l=c;l>c-2;l--){if(l>=0){if(n){n=", "+n}n=h[l]+n}}}switch($(".f-mode").val()){case"sale":a="FOR SALE";p="";break;case"swap":a="SWAP";p=$(".f-swap-for").val();break;case"freebie":a="FREEBIE";p="";break}var g="";f=f+a;f=f+d;g=g+'<span class="label-action">';g=g+a;g=g+"</span>";g=g+' <span class="label-important">'+d+"</span>";if($(".f-mode").val()=="swap"&&p.length){f=f+i+p;g=g+i+'<span class="label-important">'+p+"</span>"}g=g+"<br/>";g=g+$("#dropdown-condition .value").html();f=f+$("#dropdown-condition .value").html();if($(".f-mode").val()=="sale"){if(parseInt(j,10)){f=f+j+k;g=g+", ";g=g+j+" "+k}}if(n.length){f=f+n;g=g+", ";g=g+n}g=g+'<br/><a href="#" onclick="return false;">rigbag.com/a/skdj8930933</a>';var o=parseInt($("#maxLength").val(),10)-parseInt(f.length,10);if(o>=0){$(".chars-left").html(o+" characters left");$(".chars-left").removeClass("error");$("#tooLong").val("0")}else{$(".chars-left").html(o+" characters left");$(".chars-left").addClass("error");$("#tooLong").val("1")}$(".preview").html(g)};RigBagAdvert.prototype.search=function(){$(document).unbind("scroll");var b,d;if(!$("body").hasClass("circles")){b="main";d={query:$("#searchQuery").val(),category:$("#searchCategory").val(),mode:$("#headerBottom ul .active").attr("data-type"),type:"main"}}else{b="circle";d={query:$("#searchQuery2").val(),category:$(".circles-sidebar li.active").attr("data-id"),type:"circle"}}rbApp.actionStamp=new Date().getTime();d.actionStamp=rbApp.actionStamp;var a=false;if(d.query.length>2){a=true}else{if(this.searchParams.query.length>d.query.length&&this.searchParams.lastCall){a=true}}if(a){showLoader();this.searchParams.lastCall=a;this.searchParams.query=d.query;$.ajax({type:"POST",url:APP_PATH+"advert/search/",data:d,cache:false,dataType:"json",success:function(e){if(e.actionStamp==rbApp.actionStamp){rbApp.fillData(e)}}});hideLoader()}};RigBagAdvert.prototype.remove=function(){var a={advertId:$(".adv-id").val()};showLoader();$.ajax({type:"POST",url:APP_PATH+"advert/delete/",data:a,cache:false,dataType:"json",success:function(b){if(b.success){setUrl("/adverts/list/"+b.mode+"/")}}})};RigBagAdvert.prototype.close=function(){var a={advertId:$(".adv-id").val()};showLoader();$.ajax({type:"POST",url:APP_PATH+"advert/close/",data:a,cache:false,dataType:"json",success:function(b){if(b.success){setUrl("/adverts/view/"+b.hash+"/")}}})};RigBagAdvert.prototype.socialPublish=function(b,d){var a={advertId:b,social:d};showLoader();$.ajax({type:"POST",url:APP_PATH+"advert/social/publish/",data:a,cache:false,dataType:"json",success:function(e){rbApp.showFlash(e.flashMessage.title,e.flashMessage.content,e.flashMessage.type,0)}});hideLoader()};RigBagAdvert.prototype.post=function(){showLoader();var a=[];var e=[];$(".user-circles .selected").each(function(){a.push($(this).attr("data-id"))});$(".social-connect li.connected").each(function(){e.push($(this).attr("data-type"))});if($("#formAdvert").valid()&&$("#tooLong").val()=="0"&&a.length){var b={id:$(".f-id").val(),title:$(".f-name").val(),description:$(".f-description").val(),condition:$(".f-condition").val(),currency:$(".f-currency").val(),mode:$(".f-mode").val(),location:$(".f-location").val(),locationFormated:$(".f-location-formated").val(),locationLng:$(".f-location-lng").val(),locationLat:$(".f-location-lat").val(),price:$(".f-price").val(),swapFor:$(".f-swap-for").val(),payPal:$(".f-paypal").val(),circles:a,social:e};showLoader();$.ajax({type:"POST",url:APP_PATH+"advert/save/",data:b,cache:false,dataType:"json",success:function(f){setUrl("/adverts/list/"+$(".f-mode").val()+"/");hideLoader()}})}else{var d="";if($("#tooLong").val()=="1"){d=d+"&bull; Advert is too long<br/>"}if(!a.length){d=d+"&bull; Please select circle"}if(d.length){$("#msg-view").html('<div class="alert alert-error">'+d+"</div>");$("#msg-view").show()}else{$("#msg-view").hide()}}};
RigBagQa=function(){this.searchParams={query:"",lastCall:false}};RigBagQa.prototype.search=function(){var b,c;if($("body").hasClass("circles")){b="circles"}else{b="main"}if(b=="circles"){c={query:$("#searchQuery").val(),circle:$(".circles-sidebar li.active").attr("data-id"),type:b}}else{c={query:$("#searchQuery").val(),category:$("#searchCategory").val(),type:b}}rbApp.actionStamp=new Date().getTime();c.actionStamp=rbApp.actionStamp;var a=false;if(c.query.length>2){a=true}else{if(this.searchParams.query.length>c.query.length&&this.searchParams.lastCall){a=true}}if(a){showLoader();this.searchParams.lastCall=a;this.searchParams.query=c.query;$.ajax({type:"POST",url:APP_PATH+"q-and-a/search/",data:c,cache:false,dataType:"json",success:function(d){hideLoader();if(rbApp.actionStamp==d.actionStamp){if(b==="circles"){$("#circle-content").html(d.content)}else{$("#qa-list").html(d.content)}}}})}};RigBagQa.prototype.remove=function(d,b,a){var c={id:d};$.ajax({type:"POST",url:APP_PATH+"q-and-a/delete/",data:c,cache:false,dataType:"json",success:function(e){switch(b){case"call-action":rbApp.callAction(a);break;case"fade-out":$(a).fadeOut();break}}})};RigBagQa.prototype.answersRefresh=function(){var a={qid:$("#qid").val()};$.ajax({type:"POST",url:APP_PATH+"q-and-a/referesh/",data:a,cache:false,dataType:"json",success:function(b){$("#qa-answers").html(b.content)}})};RigBagQa.prototype.advertPrivateReply=function(e){if($(e).valid()){var b=$(e).val();var a=$(".usr-name").val();var i=$(e).attr("data-parent");var g=new Date();var h=g.getTime();var j=$(".adv-id").val();var f='<li class="hide" id="answer-'+h+'">';f=f+'<div class="user">'+a+"</div>";f=f+'<div class="answer">'+b+"</div>";f=f+'<div class="date" date-stamp="'+g.getTime()+'">now';f=f+' &bull; <a href="#" onclick="qaAdvertPrivateDelete( $(this).parent().parent() ); return false;" title="" class="hide remove-2">remove</a>';f=f+"</div>";f=f+"</li>";$("#answers-"+i).append(f);$("#answer-"+h).fadeIn();$(e).val("");var c={qid:i,answer:b,extraType:"advertPrivate"};$.ajax({type:"POST",url:APP_PATH+"q-and-a/answer/",data:c,cache:false,dataType:"json",success:function(d){$("#answer-"+h+" .remove-2").fadeIn();$("#answer-"+h).attr("data-id",d.id)}})}};RigBagQa.prototype.answerSend=function(){if($("#answer").valid()){var a={answer:$("#answer").val(),qid:$("#qid").val()};$.ajax({type:"POST",url:APP_PATH+"q-and-a/answer/",data:a,cache:false,dataType:"json",success:function(b){$("#answer").val("");$("#qa-answers").html(b.content)}})}};RigBagQa.prototype.send=function(b){if($("#formQA").valid()){var c="";c=$("#extraData").val();var a={question:$("#question").val(),circle:$("#questionCircle").val(),extraType:$("#extraType").val(),extraData:c,circleId:b};$.ajax({type:"POST",url:APP_PATH+"q-and-a/add/",data:a,cache:false,dataType:"json",success:function(e){var d;console.log(e);switch($("#extraType").val()){case"advertPrivate":$("#messages-list").html(e.content);d={advertId:c,qaId:e.qaId};sendMail("advertAsk",d);break;case"advertFree":d={advertId:c,qaId:e.qaId};$("#messages-list").html(e.content);sendMail("freeOffer",d);break;case"advertSwap":d={advertId:c,qaId:e.qaId};$("#messages-list").html(e.content);sendMail("swapOffer",d);break;case"advertQuestion":rbApp.callAction("q-and-a/none/0/");break;default:$(".top .nav-right .add").removeClass("active");$("#qa-list").html(e.content);$(".no-items").remove()}$("#question").val("");$(".question-new-form").slideUp();$(".bottom .add-button").removeClass("active")}})}};
RigBagUser=function(){this.id=null};RigBagUser.prototype.setId=function(a){this.id=a};RigBagUser.prototype.search=function(){var a={query:$("#searchQuery").val(),circle:$(".circles-sidebar li.active").attr("data-id")};rbApp.actionStamp=new Date().getTime();a.actionStamp=rbApp.actionStamp;$.ajax({type:"POST",url:APP_PATH+"users/search/",data:a,cache:false,dataType:"json",success:function(b){hideLoader();if(b.actionStamp==rbApp.actionStamp){$("#circle-content").html(b.content)}}})};RigBagUser.prototype.refreshAccount=function(){this.panelRefresh()};RigBagUser.prototype.refreshMessages=function(){var a={};$.ajax({type:"POST",url:APP_PATH+"user/panel/messages/",data:a,cache:false,dataType:"json",success:function(b){$("#user-panel .popover-content").html(b.content)}})};RigBagUser.prototype.panelRefresh=function(){var a={};$.ajax({type:"POST",url:APP_PATH+"user/panel/refresh/",data:a,cache:false,dataType:"json",success:function(b){$("#user-panel .message .info").html(b.messages.newCount);if(b.messages.newCount){$("#user-panel .message").addClass("active")}else{$("#user-panel .message").removeClass("active")}},error:function(b){console.log(b)}})};RigBagUser.prototype.profileUpdate=function(b){if(b===undefined){b=false}if($("#formProfile").valid()){showLoader();var a={name:$(".f-name").val(),email:$(".f-email").val(),location:$(".f-location").val(),location_cc:$(".f-location-cc").val(),location_formated:$(".f-location-formated").val(),location_lat:$(".f-location-lat").val(),location_lng:$(".f-location-lng").val(),postCode:"",paypalId:$(".f-paypal").val(),phone:$(".f-phone").val(),bio:$(".f-bio").val()};$.ajax({type:"POST",url:APP_PATH+"settings/my-profile-update/",data:a,cache:false,dataType:"json",success:function(d){hideLoader();if(d.success){if(b){setUrl("/signup/mysports/")}else{rbApp.showFlash("","Your profile has been updated.","success",6000)}}else{for(var c in d.errorFields){$("."+d.errorFields[c]).addClass("error")}}},error:function(){hideLoader();rbApp.showFlash("Error","Upsss","error",10000)}})}};RigBagUser.prototype.facebookConnect=function(){var a={bckData:{name:$(".f-name").val(),email:$(".f-email").val(),location:$(".f-location").val(),location_cc:$(".f-location-cc").val(),postCode:$(".f-post-code").val(),phone:$(".f-phone").val(),bio:$(".f-bio").val()}};$.ajax({type:"POST",url:APP_PATH+"settings/connect/facebook/",data:a,cache:false,dataType:"json",success:function(b){if(b.canConnect){window.location=APP_PATH+"login/facebook/"}},error:function(){}})};RigBagUser.prototype.facebookDisconnect=function(){$.ajax({type:"POST",url:APP_PATH+"settings/disconnect/facebook/",data:data,cache:false,dataType:"json",success:function(a){},error:function(){}})};RigBagUser.prototype.twitterConnect=function(){var a={bckData:{name:$(".f-name").val(),email:$(".f-email").val(),location:$(".f-location").val(),location_cc:$(".f-location-cc").val(),postCode:$(".f-post-code").val(),phone:$(".f-phone").val(),bio:$(".f-bio").val()}};$.ajax({type:"POST",url:APP_PATH+"settings/connect/twitter/",data:a,cache:false,dataType:"json",success:function(b){if(b.canConnect){window.location=APP_PATH+"login/twitter/"}},error:function(){}})};RigBagUser.prototype.twitterDisconnect=function(){$.ajax({type:"POST",url:APP_PATH+"settings/disconnect/twitter/",data:data,cache:false,dataType:"json",success:function(a){},error:function(){}})};RigBagUser.prototype.googleConnect=function(){var a={bckData:{name:$(".f-name").val(),email:$(".f-email").val(),location:$(".f-location").val(),location_cc:$(".f-location-cc").val(),postCode:$(".f-post-code").val(),phone:$(".f-phone").val(),bio:$(".f-bio").val()}};$.ajax({type:"POST",url:APP_PATH+"settings/connect/google/",data:a,cache:false,dataType:"json",success:function(b){if(b.canConnect){window.location=APP_PATH+"login/google/"}},error:function(){}})};RigBagUser.prototype.googleDisconnect=function(){$.ajax({type:"POST",url:APP_PATH+"settings/disconnect/google/",data:data,cache:false,dataType:"json",success:function(a){},error:function(){}})};
RigBagCircle=function(){};RigBagCircle.prototype.remove=function(a){if(confirm("Are you sure?")){$("#circle-"+a).fadeOut();$.ajax({type:"POST",url:APP_PATH+"circles/delete/"+a+"/",data:{},cache:false,dataType:"json",success:function(b){}})}};RigBagCircle.prototype.searchJoin=function(){rbApp.callAction("circles/join/search/?q="+$("#key").val())};RigBagCircle.prototype.join=function(a){var b=$(a).attr("data-id");$.ajax({type:"POST",url:APP_PATH+"circles/add/"+b+"/",data:{},cache:false,dataType:"json",success:function(c){$(a).fadeOut()}})};
RigBagMySport=function(){};RigBagMySport.prototype.click=function(b){var c=$(b).attr("data-id");var a;if($(b).hasClass("selected")){if($("#sports-list li.selected").length==1){alert("You have to select at least one sport.");return false}$(b).removeClass("selected");a="remove"}else{$(b).addClass("selected");a="add"}$.ajax({type:"POST",url:APP_PATH+"settings/my-sport-update/",data:{id:c,action:a},cache:false,dataType:"json",success:function(d){}})};RigBagMySport.prototype.setFilled=function(a){$.ajax({type:"POST",url:APP_PATH+"settings/mysportsfilled/",data:{},cache:false,dataType:"json",success:function(b){setUrl("/signup/subscription/")}})};